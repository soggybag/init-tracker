(this["webpackJsonpinit-tracker"]=this["webpackJsonpinit-tracker"]||[]).push([[0],{17:function(e,t,n){e.exports=n(30)},22:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),l=n.n(c),u=(n(22),n(5)),o=n(1),i=n(4),s=n(2),m=function(e,t,n){return{type:"NEW_PLAYER",payload:{name:e,init:t,dex:n}}},E=function(e,t,n){return{type:"NEW_MONSTER",payload:{name:e,init:t,dex:n}}},d=n(3),b=n(11),f=n(10);var v=function e(t,n,a,r){Object(d.a)(this,e),this.name=t,this.dex=n,this.init=a,this.type=r,this.roll=0},O=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e,a,r,c){var l,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"-";return Object(d.a)(this,n),(l=t.call(this,e,a,r,c)).playerName=u,l}return n}(v),p=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e,a,r,c){var l;return Object(d.a)(this,n),(l=t.call(this,e,a,r,c)).type="monster",l}return n}(v),j=function e(t){Object(d.a)(this,e),this.name=t,this.monsters=[]},h={players:[],monsters:[],encounters:[],selectedEncounter:null,initList:[]};function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return Math.floor(Math.random()*e)+1}function g(e){return Math.floor((e-10)/2)}var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"NEW_PLAYER":var r=new O(a.name,a.dex,a.init);return Object(s.a)(Object(s.a)({},e),{},{players:[].concat(Object(i.a)(e.players),[r])});case"NEW_MONSTER":var c=new p(a.name,a.dex,a.init);return Object(s.a)(Object(s.a)({},e),{},{monsters:[].concat(Object(i.a)(e.monsters),[c])});case"CREATE_ENCOUNTER_LIST":return Object(s.a)(Object(s.a)({},e),{},{encounters:[].concat(Object(i.a)(e.encounters),[new j(a.name)])});case"ADD_MONSTER":if(null===e.selectedEncounter)return e;var l=Object(s.a)(Object(s.a)({},e),{},{encounters:Object(i.a)(e.encounters)});return l.encounters[e.selectedEncounter].monsters.push(e.monsters[a.monster]),l;case"SELECT_ENCOUNTER":return Object(s.a)(Object(s.a)({},e),{},{selectedEncounter:a.index});case"ROLL_INIT":if(null===e.selectedEncounter)return e;var u=[].concat(Object(i.a)(e.players),Object(i.a)(e.encounters[e.selectedEncounter].monsters)).map((function(e){return Object.assign({},e)}));return u.forEach((function(e){var t=y(),n=g(e.dex),a=e.init;console.log("roll:",t,"bonus:",n,"init:",a),e.roll=t+n+a})),u.sort((function(e,t){return e.roll>t.roll})),console.log(u),Object(s.a)(Object(s.a)({},e),{},{initList:u});default:return e}},T=Object(u.b)({tracker:N}),S=n(6);function k(e){var t=e.action,n=e.title,c=Object(a.useState)(""),l=Object(S.a)(c,2),u=l[0],i=l[1],s=Object(a.useState)(10),m=Object(S.a)(s,2),E=m[0],d=m[1],b=Object(a.useState)(0),f=Object(S.a)(b,2),v=f[0],O=f[1],p=Object(o.b)();return r.a.createElement("form",{className:"new-entity-form",onSubmit:function(e){e.preventDefault(),""!==u&&(p(t(u,parseInt(E),parseInt(v))),i(""),d(10),O(0))}},r.a.createElement("h2",null,n),r.a.createElement("input",{className:"",type:"text",placeholder:"name",value:u,onChange:function(e){return i(e.target.value)}}),r.a.createElement("input",{type:"number",placeholder:"Dex",value:E,onChange:function(e){return d(e.target.value)}}),r.a.createElement("input",{type:"number",placeholder:"init bonus",value:v,onChange:function(e){return O(e.target.value)}}),r.a.createElement("button",{type:"submit"},"\u271a"))}function x(e){var t=e.index,n=e.data,a=n.name,c=n.dex,l=n.init;return r.a.createElement("div",null,r.a.createElement("span",null,t," "),r.a.createElement("span",null,a," ")," s",r.a.createElement("span",null,c," "),r.a.createElement("span",null,l))}function C(e){var t=e.list;return r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement(x,{key:"entity-".concat(t),index:t,data:e})})))}function R(e){var t=e.title,n=Object(a.useState)(""),c=Object(S.a)(n,2),l=c[0],u=c[1],i=Object(o.b)();return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==l&&(i(function(e){return{type:"CREATE_ENCOUNTER_LIST",payload:{name:e}}}(l)),u(""))}},r.a.createElement("h2",null,t),r.a.createElement("input",{type:"text",placeholder:"Name",value:l,onChange:function(e){return u(e.target.value)}}),r.a.createElement("button",null,"\u271a"))}function _(e){var t=Object(o.b)(),n=e.name,a=e.monsters,c=e.selected,l=e.index,u=a.length;return r.a.createElement("div",{onClick:function(){return t(function(e){return{type:"SELECT_ENCOUNTER",payload:{index:e}}}(l))}},n," (",u,") ",c&&"*")}function I(){var e=Object(o.c)((function(e){return e.tracker.encounters})),t=Object(o.c)((function(e){return e.tracker.selectedEncounter}));return r.a.createElement("div",null,e.map((function(e,n){var a=n===t;return r.a.createElement(_,Object.assign({selected:a,key:"encounter-".concat(n),index:n},e))})))}function A(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.tracker.initList}));return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){e({type:"ROLL_INIT"})}},"Generate Encounter"),t.length&&t.map((function(e,t){return r.a.createElement("div",{key:"entity-".concat(t)},e.name," ",e.roll)})))}function L(e){var t=e.index,n=e.data,a=Object(o.b)(),c=n.name,l=n.dex,u=n.init;return r.a.createElement("div",null,r.a.createElement("span",null,t," "),r.a.createElement("span",null,c," "),r.a.createElement("span",null,l," "),r.a.createElement("span",null,u," "),r.a.createElement("button",{className:"add-to-encounter-button",onClick:function(){return a({type:"ADD_MONSTER",payload:{monster:t}})}},"\u271a"))}function w(e){var t=e.list;return r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement(L,{key:"monster-".concat(t),index:t,data:e})})))}function M(){var e=Object(o.c)((function(e){return e.tracker.players})),t=Object(o.c)((function(e){return e.tracker.monsters})),n=Object(o.c)((function(e){return e.tracker.selectedEncounter})),a=Object(o.c)((function(e){return e.tracker.encounters}))[n];return r.a.createElement("div",{className:"App"},r.a.createElement("div",null,r.a.createElement(k,{action:m,title:"Add Player"}),r.a.createElement(C,{list:e})),r.a.createElement("div",null,r.a.createElement(k,{action:E,title:"Add Monster"}),r.a.createElement(w,{list:t})),r.a.createElement("div",null,r.a.createElement(R,{title:"Add Encounter"}),r.a.createElement(I,null),r.a.createElement("h3",null,"Current Encounter"),a&&r.a.createElement(C,{list:a.monsters})),r.a.createElement("div",null,r.a.createElement("h2",null,"Initiative List"),r.a.createElement(A,null)))}n(29);var D=function(){try{var e=localStorage.getItem("INIT_TRACKER_STATE");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),W=Object(u.c)(T,D);W.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("INIT_TRACKER_STATE",t)}catch(n){console.log("Error saving data")}}(W.getState())}));var J=function(){return r.a.createElement(o.a,{store:W},r.a.createElement(M,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.c75c153f.chunk.js.map